<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>ğŸ”’ Protnut OEM Portal</title>
  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Firebase SDKs (å‡è¨­å·²åŒ…å«ï¼ŒåŸæ–‡ä»¶æœªé¡¯ç¤º) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
  
  <style>
    .hidden { display: none; }
    body { background-color: #f8f9fa; }
    .card { margin-bottom: 1rem; }
      
    .remark-cell {
      max-width: 300px;
      white-space: normal;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .remark-text {
      display: inline-block;
      max-height: 4.5em;   /* é è¨­é¡¯ç¤ºç´„3è¡Œ */
      overflow: hidden;
    }
    .toggle-remark {
      cursor: pointer;
      color: blue;
      margin-left: 5px;
      font-size: 0.9em;
    }
  </style>
</head>
<body class="container mt-5">
  <div id="auth-area">
    <div class="row">
     <div class="d-flex justify-content-center">
      <div class="col-md-6">
        <h3>ç™»å…¥å¸³è™Ÿ</h3>
        <input type="email" id="li-email" class="form-control mb-2" placeholder="Email">
        <input type="password" id="li-pw" class="form-control mb-2" placeholder="å¯†ç¢¼">
        <button id="btn-login" class="btn btn-success">ç™»å…¥</button>
      </div>
     </div>
    </div>
    <div id="auth-msg" class="text-danger mt-3"></div>
  </div>

  <div id="user-area" class="hidden">
    <h3 class="d-flex align-items-center">æ­¡è¿, <span id="user-email"></span> <span id="user-note"></span><button id="btn-logout" class="btn btn-danger btn-sm ms-3">ç™»å‡º</button></h3>

    <!-- æ–°å¢: æµç¨‹æ•™å­¸å€å¡Š -->
    <div id="tutorial-area" class="mt-4 card p-3">
      <h4>ä»£å·¥å°ˆæ¡ˆç”³è«‹å ±åƒ¹æµç¨‹æ•™å­¸</h4>
      <ol>
        <li><strong>å»ºæ¡ˆ</strong>: é»æ“Š"å»ºç«‹æ–°å°ˆæ¡ˆ"ï¼Œè¼¸å…¥æ¨™é¡Œä¸¦ä¸Šå‚³åˆå§‹æª”æ¡ˆã€‚</li>
        <li><strong>ä¸Šå‚³</strong>: ä¸Šå‚³è¨­è¨ˆã€è¦æ ¼ã€2D/3D drawingç­‰æ–‡ä»¶ï¼ˆæ”¯æ´å¤šæª”ï¼Œé™¤.exeå¤–ï¼‰ã€‚ç¢ºèªå¾ŒæŒ‰"å®Œæˆ"é€²å…¥DFMã€‚</li>
        <li><strong>DFM</strong>: å…¬å¸è©•ä¼°è£½é€ é¢¨éšªï¼Œè¨è«–ä¿®æ­£å¾Œä¸Šå‚³å ±å‘Šã€‚</li>
        <li><strong>å ±åƒ¹</strong>: å…¬å¸åŸºæ–¼DFMæä¾›å ±åƒ¹ï¼ˆå«æ¨¡å…·ç­‰ï¼‰ã€‚</li>
        <li><strong>ä¸‹å–®</strong>: æ‚¨ç¢ºèªå ±åƒ¹ï¼Œä¸Šå‚³POè¨‚å–®ã€‚</li>
        <li><strong>æ‰“æ¨£</strong>: å…¬å¸è£½é€ æ¨£å“ã€‚</li>
        <li><strong>äº¤è²¨</strong>: å‡ºè²¨é™„æª¢é©—å ±å‘Šã€‚</li>
      </ol>
      <p>æ¯å€‹ä»»å‹™åƒ…è² è²¬è€…å¯ç¢ºèªå®Œæˆï¼Œç³»çµ±æœƒè‡ªå‹•é€šçŸ¥ä¸‹ä¸€æ–¹ï¼ˆemailï¼‰ã€‚</p>
    </div>

    <div id="new-project-area" class="hidden mt-4 card p-3">
      <h4>å»ºç«‹æ–°å°ˆæ¡ˆ</h4>
      <input type="text" id="proj-title" class="form-control mb-2" placeholder="å°ˆæ¡ˆåç¨±">
      <!-- ä¿®æ”¹: æ”¯æ´å¤šæª”ä¸Šå‚³ -->
      <input type="file" id="proj-files" class="form-control mb-2" multiple accept="*/*" onchange="validateFiles(this)">
      <button id="btn-create-project" class="btn btn-success">é€å‡ºå°ˆæ¡ˆ</button>
    </div>

    <div id="projects-list" class="hidden mt-4">
      <h3 class="d-flex align-items-center">æˆ‘çš„å°ˆæ¡ˆ<button id="btn-new-project" class="btn btn-primary btn-sm ms-3">â• å»ºç«‹æ–°å°ˆæ¡ˆ</button></h3>
      <div id="projects-container"></div> <!-- é€™è£¡æœƒç”¨è¡¨æ ¼é¡¯ç¤ºæ¸…å–® -->
    </div>
  </div>

  <div id="admin-area" class="hidden mt-5">
        <h4>ç®¡ç†å“¡æ§åˆ¶å°</h4>

        <!-- å¾…å¯©æ ¸ç”¨æˆ¶ -->
        <div class="card">
          <h5>å¾…å¯©æ ¸å¸³è™Ÿ</h5>
          <div id="pending-list"></div>
        </div>

        <!-- æ‰€æœ‰å°ˆæ¡ˆ -->
        <div class="card">
          <h5>æ‰€æœ‰å°ˆæ¡ˆ</h5>
          <div id="admin-projects"></div>
        </div>

        <!-- é€šçŸ¥ -->
        <div class="card">
          <h5>æœ€æ–°é€šçŸ¥</h5>
          <div id="notifications"></div>
        </div>
              <h5>æ‰‹å‹•æ–°å¢ç”¨æˆ¶ï¼ˆå…è¨±éå…¬å¸åŸŸåï¼‰</h5>
        <input type="email" id="admin-new-email" placeholder="Email">
        <input type="password" id="admin-new-pw" placeholder="å¯†ç¢¼">
        <button onclick="adminAddUser(document.getElementById('admin-new-email').value, document.getElementById('admin-new-pw').value)">æ–°å¢</button>
      </div>

  <!-- ===== JS ===== -->
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script>
    // TODO: æ›æˆä½ çš„ Firebase å°ˆæ¡ˆè¨­å®š
    const firebaseConfig = {
        apiKey: "AIzaSyCyL5D-TzMUL2LMWubzNiQCnBzQbJVcsZ0",
          authDomain: "protnut711.firebaseapp.com",
          projectId: "protnut711",
          storageBucket: "protnut711.firebasestorage.app",
          messagingSenderId: "891034366919",
          appId: "1:891034366919:web:95e24c97db6abd976d5fe2",
          measurementId: "G-KEZDX0E972"
        };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- Portal App Logic -->
  <script src="js/app.js"></script>
</body>
</html>